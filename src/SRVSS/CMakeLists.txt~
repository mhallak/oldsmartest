cmake_minimum_required(VERSION 2.8.3)
project(SRVSS)


find_package(catkin REQUIRED COMPONENTS
cmake_modules
)

find_package(Boost REQUIRED COMPONENTS system)

find_package(TinyXML REQUIRED)

find_package(OpenCV REQUIRED)
                            
find_package(Gazebo REQUIRED)

catkin_package(
    #LIBRARIES  
    INCLUDE_DIRS
      include
    DEPENDS
      TinyXML
)

                                                                                                                                                 
include_directories(include ${catkin_INCLUDE_DIRS} ${GAZEBO_INCLUDE_DIRS} ${TinyXML_INCLUDE_DIRS} ${Boost_INCLUDE_DIR} /usr/include/sdformat-1.4)



add_library(NumberSampler src/utils/NumberSampler.cpp)
add_library(RolledValue src/utils/RolledValue.cpp)




#############
### SFDP ####
#############
add_library(ScenarioFeatureDependecyType src/SFDP/ScenarioFeatureDependecyType.cpp)
add_library(ScenarioFeatureDistributionType src/SFDP/ScenarioFeatureDistributionType.cpp)
add_library(ScenarioFeatureType src/SFDP/ScenarioFeatureType.cpp)
add_library(ScenarioFeatureGroupType src/SFDP/ScenarioFeatureGroupType.cpp)
add_library(ScenarioFeature src/SFDP/ScenarioFeature.cpp)

add_library(ScenarioFeatureDependecy src/SFDP/ScenarioFeatureDependecy.cpp)
target_link_libraries(ScenarioFeatureDependecy ${catkin_LIBRARIES}
ScenarioFeatureDependecyType
ScenarioFeatureType
)

target_link_libraries(ScenarioFeature ${catkin_LIBRARIES}
ScenarioFeatureDependecyType
ScenarioFeatureDistributionType
ScenarioFeatureType
ScenarioFeatureDependecy
RolledValue
)

add_library(ScenarioFeatureGroup src/SFDP/ScenarioFeatureGroup.cpp)

target_link_libraries(ScenarioFeatureGroup  ${catkin_LIBRARIES}
ScenarioFeature
)


add_library(SDFPComponent src/SFDP/SDFPComponent.cpp)
target_link_libraries(SDFPComponent ${catkin_LIBRARIES}
ScenarioFeatureDependecyType
ScenarioFeatureDistributionType
ScenarioFeatureType
ScenarioFeatureGroupType
ScenarioFeatureGroup
ScenarioFeature
ScenarioFeatureDependecy
NumberSampler
RolledValue
)
add_library(SDFPParser src/SFDP/SDFPParser.cpp)
target_link_libraries(SDFPParser ${catkin_LIBRARIES} ${TinyXML_LIBRARIES}
ScenarioFeatureDependecyType
ScenarioFeatureDistributionType
ScenarioFeatureType
ScenarioFeature
SDFPComponent
)


#############
#### SFV ####
#############
add_library(SFVObject src/SFV/SFVObject.cpp)
add_library(SFVLight src/SFV/SFVLight.cpp)
add_library(SFVTerrain src/SFV/SFVTerrain.cpp)
add_library(SFVFrictionLink src/SFV/SFVFrictionLink.cpp)
add_library(SFVSensorLink src/SFV/SFVSensorLink.cpp)
add_library(SFVMassLink src/SFV/SFVMassLink.cpp)
add_library(SFVPlatformPose src/SFV/SFVPlatformPose.cpp)
add_library(SFVWaypoint src/SFV/SFVWaypoint.cpp)
add_library(SFVComponent src/SFV/SFVComponent.cpp)

target_link_libraries(SFVComponent ${catkin_LIBRARIES}
SFVLight
SFVObject
SFVTerrain
SFVFrictionLink
SFVSensorLink
SFVMassLink
SFVPlatformPose
SFVWaypoint
RolledValue
)

##############
## RESOURCE ##
##############
add_library(ResourceHandler src/Resource/ResourceHandler.cpp)
target_link_libraries(ResourceHandler ${catkin_LIBRARIES} ${TinyXML_LIBRARIES})

##############
# GENERATORS #
##############
add_library(TerrainAnalyzer src/Generators/Gazebo/TerrainAnalyzer.cpp)
target_link_libraries(TerrainAnalyzer ${catkin_LIBRARIES} ${OpenCV_LIBS})


add_library(EnvironmentGenerator src/Generators/EnvironmentGenerator.cpp)
add_library(MissionGenerator src/Generators/MissionGenerator.cpp)
add_library(PlatformGenerator src/Generators/PlatformGenerator.cpp)


add_library(GazeboEnvironmentGenerator src/Generators/Gazebo/GazeboEnvironmentGenerator.cpp)
target_link_libraries(GazeboEnvironmentGenerator ${catkin_LIBRARIES}
ResourceHandler
TerrainAnalyzer
)

add_library(GazeboMissionGenerator src/Generators/Gazebo/GazeboMissionGenerator.cpp)
target_link_libraries(GazeboMissionGenerator ${catkin_LIBRARIES}
ResourceHandler
TerrainAnalyzer
)

add_library(GazeboPlatformGenerator src/Generators/Gazebo/GazeboPlatformGenerator.cpp)
target_link_libraries(GazeboPlatformGenerator ${catkin_LIBRARIES}
ResourceHandler
/usr/lib/libsdformat.so
)

################
# synchronizer #
################
add_library(Executor src/Executor.cpp)

add_library(SRVSSSyncronizer src/SRVSSSyncronizer.cpp)
target_link_libraries(GazeboPlatformGenerator ${catkin_LIBRARIES}
ResourceHandler
Executor
)

#############
#### MAIN ###
#############
add_executable(mainGen src/Main.cpp)
target_link_libraries(mainGen ${catkin_LIBRARIES} ${TinyXML_LIBRARIES}
SDFPComponent
SFVComponent
SDFPParser
GazeboEnvironmentGenerator
GazeboPlatformGenerator
GazeboMissionGenerator
SRVSSSyncronizer
)

