/*
 * SchenarioCordinator.h
 *
 *  Created on: Jul 22, 2014
 *      Author: userws1
 */

#ifndef SCENARIOCOORDINATOR_H_
#define SCENARIOCOORDINATOR_H_
#include <Python.h>
#include <string>
#include <sstream>

class ScenarioCoordinator
{
		PyObject* m_pyInstance;
	public:
		ScenarioCoordinator(PyObject* pyInstance);
		virtual ~ScenarioCoordinator();

	    void startRosCore();
	    void startGazeboServer();
	    void launchGazeboClient();
	    void stopRosCore();
	    void stopGazeboServer();
	    void runNode(std::string name,std::string package,std::string executable,std::string arguments="");
	    void killNode(std::string name);
	    void killAllNodes();
	    void pauseSimulation();
	    void unpauseSimulation();
	    void resetSimulation();
	    template<typename T>
	    void spawnGazeboModel(T *model)
	    {
	    	std::stringstream ss;
	    	ss << model->toXMLElement();
	    	PyObject_CallMethod(m_pyInstance, "spawnGazeboObject","(ss)",model->m_name.c_str(),ss.str().c_str(),NULL);
	    }

};

#endif /* SCHENARIOCOORDINATOR_H_ */
